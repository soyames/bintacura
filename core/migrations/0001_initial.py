# Generated by Django 6.0 on 2025-12-07 00:47

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='RegionalConfiguration',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('region_code', models.CharField(db_index=True, max_length=50, unique=True)),
                ('region_name', models.CharField(max_length=200)),
                ('domain', models.CharField(help_text='e.g., ml.BINTACURA.com', max_length=255)),
                ('country_code', models.CharField(help_text='ISO country code', max_length=2)),
                ('region_timezone', models.CharField(default='UTC', max_length=50)),
                ('language_code', models.CharField(default='fr', max_length=10)),
                ('currency_code', models.CharField(default='XOF', max_length=3)),
                ('payment_provider', models.CharField(choices=[('fedapay', 'FedaPay'), ('stripe', 'Stripe'), ('mtn_momo', 'MTN Mobile Money'), ('orange_money', 'Orange Money')], max_length=50)),
                ('payment_api_key_encrypted', models.TextField(blank=True)),
                ('payment_webhook_secret', models.TextField(blank=True)),
                ('max_appointment_distance_km', models.IntegerField(default=50)),
                ('max_delivery_distance_km', models.IntegerField(default=20)),
                ('is_active', models.BooleanField(default=True)),
                ('maintenance_mode', models.BooleanField(default=False)),
                ('maintenance_message', models.TextField(blank=True)),
                ('database_host', models.CharField(blank=True, max_length=255)),
                ('database_name', models.CharField(blank=True, max_length=100)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'regional_configurations',
                'ordering': ['region_name'],
            },
        ),
        migrations.CreateModel(
            name='Participant',
            fields=[
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('uid', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('email', models.EmailField(max_length=254, unique=True)),
                ('phone_number', models.CharField(blank=True, max_length=20, null=True)),
                ('role', models.CharField(choices=[('patient', 'Patient'), ('doctor', 'Doctor'), ('hospital', 'Hospital'), ('pharmacy', 'Pharmacy'), ('insurance_company', 'Insurance Company'), ('admin', 'Admin'), ('super_admin', 'Super Admin')], max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('is_verified', models.BooleanField(default=False)),
                ('is_email_verified', models.BooleanField(default=False)),
                ('has_blue_checkmark', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('last_login_at', models.DateTimeField(blank=True, null=True)),
                ('full_name', models.CharField(blank=True, max_length=255)),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('gender', models.CharField(blank=True, max_length=20)),
                ('profile_picture_url', models.URLField(blank=True)),
                ('address', models.TextField(blank=True)),
                ('city', models.CharField(blank=True, max_length=100)),
                ('country', models.CharField(blank=True, max_length=100)),
                ('preferred_currency', models.CharField(blank=True, default='EUR', max_length=3)),
                ('preferred_language', models.CharField(blank=True, choices=[('fr', 'Fran√ßais'), ('en', 'English')], default='fr', max_length=2)),
                ('region_code', models.CharField(db_index=True, default='global', help_text='Region code for multi-tenant deployment', max_length=50)),
                ('affiliated_provider_id', models.UUIDField(blank=True, null=True)),
                ('staff_role', models.CharField(blank=True, choices=[('doctor', 'Doctor'), ('nurse', 'Nurse'), ('receptionist', 'Receptionist'), ('pharmacist', 'Pharmacist'), ('lab_technician', 'Lab Technician'), ('administrator', 'Administrator')], max_length=50)),
                ('department_id', models.CharField(blank=True, max_length=100)),
                ('supervisor_id', models.UUIDField(blank=True, null=True)),
                ('employee_id', models.CharField(blank=True, max_length=100)),
                ('admin_level', models.CharField(blank=True, choices=[('superAdmin', 'Super Admin'), ('admin', 'Admin'), ('moderator', 'Moderator'), ('analyst', 'Analyst'), ('viewer', 'Viewer')], max_length=20)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('is_staff', models.BooleanField(default=False)),
                ('activation_code', models.CharField(blank=True, max_length=6)),
                ('activation_code_created_at', models.DateTimeField(blank=True, null=True)),
                ('terms_accepted', models.BooleanField(default=False)),
                ('terms_accepted_at', models.DateTimeField(blank=True, null=True)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
            ],
            options={
                'db_table': 'participants',
            },
        ),
        migrations.CreateModel(
            name='AdminPermissions',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('full_system_access', models.BooleanField(default=False)),
                ('payment_system_access', models.BooleanField(default=False)),
                ('participant_management', models.BooleanField(default=False)),
                ('analytics_access', models.BooleanField(default=False)),
                ('audit_access', models.BooleanField(default=False)),
                ('provider_verification', models.BooleanField(default=False)),
                ('insurance_management', models.BooleanField(default=False)),
                ('content_moderation', models.BooleanField(default=False)),
                ('system_configuration', models.BooleanField(default=False)),
                ('api_management', models.BooleanField(default=False)),
                ('database_access', models.BooleanField(default=False)),
                ('compliance_monitoring', models.BooleanField(default=False)),
                ('financial_reports', models.BooleanField(default=False)),
                ('emergency_access', models.BooleanField(default=False)),
                ('participant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='admin_permissions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'admin_permissions',
            },
        ),
        migrations.CreateModel(
            name='AuditLogEntry',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action_type', models.CharField(choices=[('create', 'Create'), ('read', 'Read'), ('update', 'Update'), ('delete', 'Delete'), ('login', 'Login'), ('logout', 'Logout'), ('payment', 'Payment'), ('access_denied', 'Access Denied')], max_length=50)),
                ('resource_type', models.CharField(max_length=100)),
                ('resource_id', models.CharField(max_length=255)),
                ('timestamp', models.DateTimeField(default=django.utils.timezone.now)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('details', models.JSONField(default=dict)),
                ('success', models.BooleanField(default=True)),
                ('error_message', models.TextField(blank=True)),
                ('participant', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'audit_logs',
            },
        ),
        migrations.CreateModel(
            name='Department',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('total_beds', models.IntegerField(default=0)),
                ('occupied_beds', models.IntegerField(default=0)),
                ('total_staff', models.IntegerField(default=0)),
                ('phone_number', models.CharField(blank=True, max_length=20)),
                ('floor_number', models.CharField(blank=True, max_length=10)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('head_of_department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='headed_departments', to=settings.AUTH_USER_MODEL)),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='departments', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'departments',
            },
        ),
        migrations.CreateModel(
            name='FeatureFlagConfig',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('flag_name', models.CharField(db_index=True, max_length=100, unique=True)),
                ('description', models.TextField(help_text='What this feature flag controls')),
                ('is_enabled', models.BooleanField(default=False)),
                ('enabled_regions', models.TextField(blank=True, help_text="Comma-separated region codes (e.g., 'mali,benin') or 'all'")),
                ('rollout_percentage', models.IntegerField(default=100, help_text='Percentage of users to enable for (0-100)')),
                ('allowed_roles', models.TextField(blank=True, help_text='Comma-separated roles that can use this feature')),
                ('is_active', models.BooleanField(default=True, help_text='Set to False to disable this configuration')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_feature_flags', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'feature_flag_configs',
                'ordering': ['flag_name'],
            },
        ),
        migrations.CreateModel(
            name='InsuranceCompanyData',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('company_name', models.CharField(max_length=255)),
                ('license_number', models.CharField(max_length=100, unique=True)),
                ('registration_number', models.CharField(max_length=100)),
                ('address', models.TextField()),
                ('city', models.CharField(max_length=100)),
                ('country', models.CharField(max_length=100)),
                ('phone_number', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('website', models.URLField(blank=True)),
                ('coverage_types', models.JSONField(default=list)),
                ('network_providers', models.JSONField(blank=True, default=list)),
                ('participant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='insurance_company_data', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'insurance_company_data',
            },
        ),
        migrations.CreateModel(
            name='MedicalEquipment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('equipment_id', models.CharField(blank=True, max_length=50, unique=True)),
                ('name', models.CharField(max_length=255)),
                ('category', models.CharField(choices=[('diagnostic', 'Diagnostic'), ('surgical', 'Surgical'), ('life_support', 'Life Support'), ('monitoring', 'Monitoring'), ('therapeutic', 'Therapeutic'), ('laboratory', 'Laboratory'), ('other', 'Other')], max_length=50)),
                ('manufacturer', models.CharField(blank=True, max_length=255)),
                ('model_number', models.CharField(blank=True, max_length=100)),
                ('serial_number', models.CharField(blank=True, max_length=100)),
                ('location', models.CharField(max_length=255)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('status', models.CharField(choices=[('available', 'Available'), ('in_use', 'In Use'), ('maintenance', 'Maintenance'), ('out_of_order', 'Out of Order')], default='available', max_length=20)),
                ('purchase_date', models.DateField(blank=True, null=True)),
                ('purchase_price', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('warranty_expiry', models.DateField(blank=True, null=True)),
                ('last_maintenance_date', models.DateField(blank=True, null=True)),
                ('next_maintenance_date', models.DateField(blank=True, null=True)),
                ('maintenance_interval_days', models.IntegerField(default=90)),
                ('assigned_date', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('problem_description', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to_patient', models.ForeignKey(blank=True, limit_choices_to={'role': 'patient'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_equipment', to=settings.AUTH_USER_MODEL)),
                ('hospital', models.ForeignKey(limit_choices_to={'role': 'hospital'}, on_delete=django.db.models.deletion.CASCADE, related_name='equipment', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'medical_equipment',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ParticipantActivityLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('activity_type', models.CharField(max_length=100)),
                ('description', models.TextField()),
                ('timestamp', models.DateTimeField(default=django.utils.timezone.now)),
                ('metadata', models.JSONField(default=dict)),
                ('participant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activity_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'participant_activity_logs',
            },
        ),
        migrations.CreateModel(
            name='ParticipantProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('full_name', models.CharField(max_length=255)),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('gender', models.CharField(max_length=20)),
                ('profile_picture_url', models.URLField(blank=True)),
                ('address', models.TextField(blank=True)),
                ('city', models.CharField(max_length=100)),
                ('country', models.CharField(max_length=100)),
                ('phone_number', models.CharField(max_length=20)),
                ('emergency_contact_name', models.CharField(blank=True, max_length=255)),
                ('emergency_contact_phone', models.CharField(blank=True, max_length=20)),
                ('participant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'participant_profiles',
            },
        ),
        migrations.CreateModel(
            name='PaymentMethod',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('method_type', models.CharField(choices=[('fedapay', 'FedaPay'), ('mobile_money', 'Mobile Money'), ('card', 'Credit/Debit Card'), ('bank_account', 'Bank Account')], max_length=20)),
                ('provider_name', models.CharField(max_length=100)),
                ('account_identifier', models.CharField(max_length=255)),
                ('is_default', models.BooleanField(default=False)),
                ('status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('expired', 'Expired'), ('suspended', 'Suspended')], default='active', max_length=20)),
                ('external_token', models.CharField(blank=True, max_length=500)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('last_used_at', models.DateTimeField(blank=True, null=True)),
                ('participant', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payment_methods', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'payment_methods',
            },
        ),
        migrations.CreateModel(
            name='ProviderData',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('provider_name', models.CharField(max_length=255)),
                ('provider_type', models.CharField(choices=[('hospital', 'Hospital'), ('clinic', 'Clinic'), ('pharmacy', 'Pharmacy'), ('laboratory', 'Laboratory'), ('diagnostic_center', 'Diagnostic Center')], max_length=50)),
                ('license_number', models.CharField(max_length=100, unique=True)),
                ('registration_number', models.CharField(blank=True, max_length=100)),
                ('address', models.TextField()),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=100)),
                ('country', models.CharField(max_length=100)),
                ('postal_code', models.CharField(max_length=20)),
                ('phone_number', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('website', models.URLField(blank=True)),
                ('services_offered', models.JSONField(default=list)),
                ('operating_hours', models.JSONField(default=dict)),
                ('emergency_services', models.BooleanField(default=False)),
                ('bed_capacity', models.IntegerField(blank=True, null=True)),
                ('rating', models.FloatField(default=0.0)),
                ('total_reviews', models.IntegerField(default=0)),
                ('latitude', models.FloatField(blank=True, null=True)),
                ('longitude', models.FloatField(blank=True, null=True)),
                ('participant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='provider_data', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'provider_data',
            },
        ),
        migrations.CreateModel(
            name='ProviderService',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255)),
                ('category', models.CharField(choices=[('consultation', 'Consultation'), ('surgery', 'Surgery'), ('diagnostic', 'Diagnostic'), ('laboratory', 'Laboratory'), ('imaging', 'Imaging'), ('therapy', 'Therapy'), ('pharmacy', 'Pharmacy'), ('emergency', 'Emergency'), ('vaccination', 'Vaccination'), ('dental', 'Dental'), ('maternity', 'Maternity'), ('pediatric', 'Pediatric'), ('other', 'Other')], max_length=50)),
                ('description', models.TextField()),
                ('price', models.DecimalField(decimal_places=2, max_digits=10)),
                ('currency', models.CharField(default='FCFA', max_length=4)),
                ('duration_minutes', models.IntegerField(blank=True, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('is_available', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('provider', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='services', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'provider_services',
                'ordering': ['category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='StaffPermissions',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('can_manage_appointments', models.BooleanField(default=False)),
                ('can_view_patient_records', models.BooleanField(default=False)),
                ('can_edit_patient_records', models.BooleanField(default=False)),
                ('can_prescribe_medication', models.BooleanField(default=False)),
                ('can_manage_inventory', models.BooleanField(default=False)),
                ('can_process_payments', models.BooleanField(default=False)),
                ('can_manage_staff', models.BooleanField(default=False)),
                ('can_view_reports', models.BooleanField(default=False)),
                ('can_manage_schedules', models.BooleanField(default=False)),
                ('participant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='staff_permissions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'staff_permissions',
            },
        ),
        migrations.CreateModel(
            name='Transaction',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('transaction_ref', models.CharField(max_length=50, unique=True)),
                ('transaction_type', models.CharField(choices=[('deposit', 'Deposit'), ('withdrawal', 'Withdrawal'), ('payment', 'Payment'), ('refund', 'Refund'), ('transfer', 'Transfer'), ('commission', 'Commission'), ('fee', 'Fee')], max_length=20)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=12)),
                ('currency', models.CharField(default='EUR', max_length=3)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('processing', 'Processing'), ('completed', 'Completed'), ('failed', 'Failed'), ('cancelled', 'Cancelled'), ('reversed', 'Reversed')], default='pending', max_length=20)),
                ('payment_method', models.CharField(blank=True, choices=[('card', 'Credit/Debit Card'), ('bank_transfer', 'Bank Transfer'), ('mobile_money', 'Mobile Money'), ('cash', 'Cash'), ('wallet', 'Wallet Balance'), ('insurance', 'Insurance')], max_length=20, null=True)),
                ('description', models.TextField()),
                ('reference_id', models.CharField(blank=True, max_length=255, null=True)),
                ('balance_before', models.DecimalField(decimal_places=2, max_digits=12)),
                ('balance_after', models.DecimalField(decimal_places=2, max_digits=12)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('metadata', models.JSONField(default=dict)),
                ('recipient', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='core_received_transactions', to=settings.AUTH_USER_MODEL)),
                ('sender', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='core_sent_transactions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'core_transactions',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='RefundRequest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('request_type', models.CharField(choices=[('cancelled_appointment', 'Cancelled Appointment'), ('service_issue', 'Service Issue'), ('billing_error', 'Billing Error'), ('duplicate_payment', 'Duplicate Payment'), ('other', 'Other')], max_length=50)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('currency', models.CharField(default='XAF', max_length=3)),
                ('reason', models.TextField()),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('processing', 'Processing'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('admin_notes', models.TextField(blank=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('admin_reviewer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_refunds', to=settings.AUTH_USER_MODEL)),
                ('provider', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='refund_requests', to=settings.AUTH_USER_MODEL)),
                ('refund_transaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='refund_for_requests', to='core.transaction')),
                ('transaction', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='refund_requests', to='core.transaction')),
            ],
            options={
                'db_table': 'refund_requests',
            },
        ),
        migrations.CreateModel(
            name='TransportProvider',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255)),
                ('license_number', models.CharField(max_length=100, unique=True)),
                ('phone_number', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=254)),
                ('service_types', models.JSONField(default=list)),
                ('coverage_areas', models.JSONField(default=list)),
                ('operating_hours', models.JSONField(default=dict)),
                ('base_rate', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('per_km_rate', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('suspended', 'Suspended')], default='active', max_length=20)),
                ('rating', models.FloatField(default=0.0)),
                ('total_trips', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'db_table': 'transport_providers',
                'indexes': [models.Index(fields=['status'], name='transport_p_status_84f75f_idx')],
            },
        ),
        migrations.CreateModel(
            name='TransportRequest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('request_number', models.CharField(max_length=50, unique=True)),
                ('transport_type', models.CharField(choices=[('ambulance', 'Ambulance'), ('medical_taxi', 'Medical Taxi'), ('wheelchair_transport', 'Wheelchair Transport'), ('stretcher_transport', 'Stretcher Transport'), ('regular_taxi', 'Regular Taxi')], max_length=50)),
                ('urgency', models.CharField(choices=[('emergency', 'Emergency'), ('urgent', 'Urgent'), ('scheduled', 'Scheduled'), ('routine', 'Routine')], max_length=20)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('driver_assigned', 'Driver Assigned'), ('en_route', 'En Route'), ('arrived', 'Arrived'), ('in_transit', 'In Transit'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='pending', max_length=20)),
                ('pickup_address', models.TextField()),
                ('pickup_latitude', models.FloatField(blank=True, null=True)),
                ('pickup_longitude', models.FloatField(blank=True, null=True)),
                ('dropoff_address', models.TextField()),
                ('dropoff_latitude', models.FloatField(blank=True, null=True)),
                ('dropoff_longitude', models.FloatField(blank=True, null=True)),
                ('scheduled_pickup_time', models.DateTimeField()),
                ('actual_pickup_time', models.DateTimeField(blank=True, null=True)),
                ('actual_dropoff_time', models.DateTimeField(blank=True, null=True)),
                ('driver_id', models.UUIDField(blank=True, null=True)),
                ('driver_name', models.CharField(blank=True, max_length=255)),
                ('driver_phone', models.CharField(blank=True, max_length=20)),
                ('vehicle_number', models.CharField(blank=True, max_length=50)),
                ('estimated_cost', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('final_cost', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('payment_status', models.CharField(choices=[('pending', 'Pending'), ('paid', 'Paid'), ('refunded', 'Refunded'), ('failed', 'Failed')], default='pending', max_length=20)),
                ('payment_id', models.UUIDField(blank=True, null=True)),
                ('patient_notes', models.TextField(blank=True)),
                ('special_requirements', models.TextField(blank=True)),
                ('medical_equipment_needed', models.JSONField(blank=True, default=list)),
                ('companion_count', models.IntegerField(default=0)),
                ('companion_names', models.JSONField(blank=True, default=list)),
                ('estimated_distance', models.FloatField(blank=True, null=True)),
                ('estimated_duration', models.IntegerField(blank=True, null=True)),
                ('current_latitude', models.FloatField(blank=True, null=True)),
                ('current_longitude', models.FloatField(blank=True, null=True)),
                ('last_location_update', models.DateTimeField(blank=True, null=True)),
                ('rating', models.IntegerField(blank=True, null=True)),
                ('feedback', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('cancellation_reason', models.TextField(blank=True)),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transport_requests', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'transport_requests',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Wallet',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('balance', models.DecimalField(decimal_places=2, default=0.0, max_digits=12)),
                ('currency', models.CharField(choices=[('XOF', 'Franc CFA UEMOA'), ('XAF', 'Franc CFA CEMAC'), ('NGN', 'Nigerian Naira'), ('GHS', 'Ghanaian Cedi'), ('ZAR', 'South African Rand'), ('KES', 'Kenyan Shilling'), ('EGP', 'Egyptian Pound'), ('MAD', 'Moroccan Dirham'), ('TZS', 'Tanzanian Shilling'), ('UGX', 'Ugandan Shilling'), ('DZD', 'Algerian Dinar'), ('TND', 'Tunisian Dinar'), ('EUR', 'Euro'), ('USD', 'US Dollar'), ('GBP', 'British Pound'), ('JPY', 'Japanese Yen'), ('CNY', 'Chinese Yuan'), ('CAD', 'Canadian Dollar'), ('AUD', 'Australian Dollar'), ('CHF', 'Swiss Franc'), ('INR', 'Indian Rupee'), ('KRW', 'South Korean Won'), ('BRL', 'Brazilian Real'), ('RUB', 'Russian Ruble'), ('MXN', 'Mexican Peso'), ('SEK', 'Swedish Krona'), ('NOK', 'Norwegian Krone'), ('DKK', 'Danish Krone'), ('PLN', 'Polish Zloty'), ('TRY', 'Turkish Lira'), ('SAR', 'Saudi Riyal'), ('AED', 'UAE Dirham'), ('SGD', 'Singapore Dollar'), ('HKD', 'Hong Kong Dollar'), ('NZD', 'New Zealand Dollar'), ('THB', 'Thai Baht'), ('MYR', 'Malaysian Ringgit'), ('IDR', 'Indonesian Rupiah'), ('PHP', 'Philippine Peso'), ('VND', 'Vietnamese Dong'), ('ARS', 'Argentine Peso'), ('CLP', 'Chilean Peso'), ('COP', 'Colombian Peso'), ('PEN', 'Peruvian Sol'), ('ILS', 'Israeli Shekel')], default='EUR', max_length=3)),
                ('status', models.CharField(choices=[('active', 'Active'), ('suspended', 'Suspended'), ('frozen', 'Frozen'), ('closed', 'Closed')], default='active', max_length=20)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('last_transaction_date', models.DateTimeField(blank=True, null=True)),
                ('participant', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='core_wallet', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'core_wallets',
            },
        ),
        migrations.AddField(
            model_name='transaction',
            name='wallet',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='core_transactions', to='core.wallet'),
        ),
        migrations.AddIndex(
            model_name='participant',
            index=models.Index(fields=['email'], name='participant_email_2fc4db_idx'),
        ),
        migrations.AddIndex(
            model_name='participant',
            index=models.Index(fields=['role'], name='participant_role_23cb1d_idx'),
        ),
        migrations.AddIndex(
            model_name='participant',
            index=models.Index(fields=['affiliated_provider_id'], name='participant_affilia_031b58_idx'),
        ),
        migrations.AddIndex(
            model_name='participant',
            index=models.Index(fields=['region_code', 'role'], name='participant_region__687990_idx'),
        ),
        migrations.AddIndex(
            model_name='participant',
            index=models.Index(fields=['region_code', 'created_at'], name='participant_region__9cc43d_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlogentry',
            index=models.Index(fields=['participant', 'timestamp'], name='audit_logs_partici_5cd72d_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlogentry',
            index=models.Index(fields=['action_type'], name='audit_logs_action__168beb_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlogentry',
            index=models.Index(fields=['resource_type'], name='audit_logs_resourc_e11e1b_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='department',
            unique_together={('hospital', 'name')},
        ),
        migrations.AddIndex(
            model_name='featureflagconfig',
            index=models.Index(fields=['flag_name', 'is_active'], name='feature_fla_flag_na_b1f52b_idx'),
        ),
        migrations.AddIndex(
            model_name='featureflagconfig',
            index=models.Index(fields=['is_enabled', 'is_active'], name='feature_fla_is_enab_7c5a57_idx'),
        ),
        migrations.AddIndex(
            model_name='medicalequipment',
            index=models.Index(fields=['hospital', 'status'], name='medical_equ_hospita_ad53d1_idx'),
        ),
        migrations.AddIndex(
            model_name='medicalequipment',
            index=models.Index(fields=['equipment_id'], name='medical_equ_equipme_3a534e_idx'),
        ),
        migrations.AddIndex(
            model_name='participantactivitylog',
            index=models.Index(fields=['participant', 'timestamp'], name='participant_partici_d20300_idx'),
        ),
        migrations.AddIndex(
            model_name='participantactivitylog',
            index=models.Index(fields=['activity_type'], name='participant_activit_c51976_idx'),
        ),
        migrations.AddIndex(
            model_name='paymentmethod',
            index=models.Index(fields=['participant', 'is_default'], name='payment_met_partici_d0ab12_idx'),
        ),
        migrations.AddIndex(
            model_name='paymentmethod',
            index=models.Index(fields=['status'], name='payment_met_status_40d2e0_idx'),
        ),
        migrations.AddIndex(
            model_name='providerservice',
            index=models.Index(fields=['provider', 'category'], name='provider_se_provide_7ab835_idx'),
        ),
        migrations.AddIndex(
            model_name='providerservice',
            index=models.Index(fields=['is_active', 'is_available'], name='provider_se_is_acti_78f2bd_idx'),
        ),
        migrations.AddIndex(
            model_name='refundrequest',
            index=models.Index(fields=['provider', 'status'], name='refund_requ_provide_40b426_idx'),
        ),
        migrations.AddIndex(
            model_name='refundrequest',
            index=models.Index(fields=['status', 'created_at'], name='refund_requ_status_6c2c6c_idx'),
        ),
        migrations.AddIndex(
            model_name='refundrequest',
            index=models.Index(fields=['admin_reviewer'], name='refund_requ_admin_r_a5946a_idx'),
        ),
        migrations.AddIndex(
            model_name='transportrequest',
            index=models.Index(fields=['patient', 'status'], name='transport_r_patient_fc6d42_idx'),
        ),
        migrations.AddIndex(
            model_name='transportrequest',
            index=models.Index(fields=['request_number'], name='transport_r_request_cb1e85_idx'),
        ),
        migrations.AddIndex(
            model_name='transportrequest',
            index=models.Index(fields=['scheduled_pickup_time'], name='transport_r_schedul_cecd2e_idx'),
        ),
        migrations.AddIndex(
            model_name='transportrequest',
            index=models.Index(fields=['status'], name='transport_r_status_032a66_idx'),
        ),
        migrations.AddIndex(
            model_name='wallet',
            index=models.Index(fields=['participant'], name='core_wallet_partici_d9f5aa_idx'),
        ),
        migrations.AddIndex(
            model_name='wallet',
            index=models.Index(fields=['status'], name='core_wallet_status_09085e_idx'),
        ),
        migrations.AddIndex(
            model_name='transaction',
            index=models.Index(fields=['wallet', '-created_at'], name='core_transa_wallet__e0a68b_idx'),
        ),
        migrations.AddIndex(
            model_name='transaction',
            index=models.Index(fields=['transaction_ref'], name='core_transa_transac_daa451_idx'),
        ),
        migrations.AddIndex(
            model_name='transaction',
            index=models.Index(fields=['status'], name='core_txn_status_idx'),
        ),
        migrations.AddIndex(
            model_name='transaction',
            index=models.Index(fields=['transaction_type'], name='core_transa_transac_5c4393_idx'),
        ),
    ]

