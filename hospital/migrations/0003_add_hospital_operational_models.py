# Generated by Django 6.0 on 2025-12-18 21:15

import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0007_legalrepresentative'),
        ('hospital', '0002_rename_staff_fields_for_consistency'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='EmergencyVisit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('ed_number', models.CharField(help_text='Unique ED visit number', max_length=50, unique=True)),
                ('arrival_time', models.DateTimeField(default=django.utils.timezone.now)),
                ('arrival_mode', models.CharField(choices=[('ambulance', 'Ambulance'), ('walk_in', 'Arrivée par ses propres moyens'), ('police', 'Police'), ('helicopter', 'Hélicoptère')], default='walk_in', max_length=50)),
                ('chief_complaint', models.TextField(help_text='Main reason for ED visit')),
                ('initial_vitals', models.TextField(blank=True, help_text='Initial vital signs (JSON format)')),
                ('triage_time', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('waiting', 'En attente au triage'), ('triaged', 'Trié'), ('in_treatment', 'En traitement'), ('observation', 'En observation'), ('admitted', "Admis à l'hôpital"), ('discharged', 'Sorti'), ('left_ama', 'Parti contre avis médical'), ('transferred', 'Transféré'), ('deceased', 'Décédé')], default='waiting', max_length=20)),
                ('ed_bed_number', models.CharField(blank=True, help_text='ED bed/room location', max_length=20)),
                ('doctor_first_contact_time', models.DateTimeField(blank=True, help_text='Door-to-doctor time', null=True)),
                ('treatment_start_time', models.DateTimeField(blank=True, null=True)),
                ('disposition_time', models.DateTimeField(blank=True, help_text='When disposition decision made', null=True)),
                ('departure_time', models.DateTimeField(blank=True, null=True)),
                ('disposition', models.CharField(blank=True, help_text='Final disposition (admitted, discharged, etc.)', max_length=50)),
                ('discharge_diagnosis', models.TextField(blank=True)),
                ('discharge_instructions', models.TextField(blank=True)),
                ('follow_up_required', models.BooleanField(default=False)),
                ('follow_up_instructions', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('admission', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ed_visit', to='hospital.admission')),
                ('assigned_doctor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ed_patients', to='hospital.hospitalstaff')),
                ('assigned_nurse', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ed_nursing_patients', to='hospital.hospitalstaff')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hospital_ed_visits', to=settings.AUTH_USER_MODEL)),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='patient_ed_visits', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'emergency_visits',
                'ordering': ['-arrival_time'],
            },
        ),
        migrations.CreateModel(
            name='EquipmentMaintenance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('equipment_name', models.CharField(max_length=255)),
                ('equipment_serial_number', models.CharField(max_length=100)),
                ('equipment_location', models.CharField(max_length=255)),
                ('maintenance_type', models.CharField(choices=[('preventive', 'Préventif'), ('corrective', 'Correctif'), ('calibration', 'Étalonnage'), ('inspection', 'Inspection')], max_length=20)),
                ('maintenance_number', models.CharField(max_length=50, unique=True)),
                ('scheduled_date', models.DateField()),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('performed_by', models.CharField(blank=True, help_text='Technician name or company', max_length=255)),
                ('status', models.CharField(choices=[('scheduled', 'Programmé'), ('in_progress', 'En cours'), ('completed', 'Terminé'), ('cancelled', 'Annulé'), ('overdue', 'En retard')], default='scheduled', max_length=20)),
                ('maintenance_passed', models.BooleanField(blank=True, null=True)),
                ('findings', models.TextField(blank=True)),
                ('corrective_actions', models.TextField(blank=True)),
                ('next_maintenance_due', models.DateField(blank=True, null=True)),
                ('maintenance_frequency_days', models.IntegerField(default=365, help_text='Days between maintenance')),
                ('maintenance_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('department', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='equipment_maintenance', to='core.department')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='equipment_maintenance', to=settings.AUTH_USER_MODEL)),
                ('supervised_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supervised_maintenance', to='hospital.hospitalstaff')),
            ],
            options={
                'db_table': 'equipment_maintenance',
                'ordering': ['-scheduled_date'],
            },
        ),
        migrations.CreateModel(
            name='ICUAdmission',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('icu_admission_number', models.CharField(max_length=50, unique=True)),
                ('icu_admission_time', models.DateTimeField(default=django.utils.timezone.now)),
                ('admission_source', models.CharField(choices=[('ed', "Service d'urgence"), ('or', "Salle d'opération"), ('ward', 'Service hospitalier'), ('transfer', 'Transfert externe')], max_length=50)),
                ('admission_diagnosis', models.TextField()),
                ('apache_score', models.IntegerField(blank=True, help_text='APACHE II score (0-71)', null=True)),
                ('sofa_score', models.IntegerField(blank=True, help_text='SOFA score (0-24)', null=True)),
                ('gcs_score', models.IntegerField(blank=True, help_text='Glasgow Coma Scale (3-15)', null=True)),
                ('mechanical_ventilation', models.BooleanField(default=False)),
                ('vasopressor_support', models.BooleanField(default=False)),
                ('renal_replacement', models.BooleanField(default=False)),
                ('ecmo', models.BooleanField(default=False, help_text='Extracorporeal membrane oxygenation')),
                ('status', models.CharField(choices=[('active', 'Actif en soins intensifs'), ('transferred_out', 'Transféré hors soins intensifs'), ('discharged', 'Sorti'), ('deceased', 'Décédé')], default='active', max_length=20)),
                ('icu_discharge_time', models.DateTimeField(blank=True, null=True)),
                ('icu_length_of_stay_hours', models.IntegerField(blank=True, null=True)),
                ('discharge_destination', models.CharField(blank=True, max_length=50)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('admission', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='icu_admissions', to='hospital.admission')),
                ('attending_physician', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='icu_patients', to='hospital.hospitalstaff')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hospital_icu_admissions', to=settings.AUTH_USER_MODEL)),
                ('icu_bed', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='icu_patients', to='hospital.bed')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='patient_icu_admissions', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'icu_admissions',
                'ordering': ['-icu_admission_time'],
            },
        ),
        migrations.CreateModel(
            name='OnCallSchedule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('start_datetime', models.DateTimeField()),
                ('end_datetime', models.DateTimeField()),
                ('priority', models.CharField(choices=[('primary', 'Principal'), ('backup', 'Remplaçant')], default='primary', max_length=20)),
                ('contact_phone', models.CharField(max_length=20)),
                ('response_time_minutes', models.IntegerField(default=30, help_text='Expected response time in minutes')),
                ('status', models.CharField(choices=[('scheduled', 'Programmé'), ('active', 'Actif'), ('called_in', 'Appelé'), ('completed', 'Terminé'), ('cancelled', 'Annulé')], default='scheduled', max_length=20)),
                ('was_called', models.BooleanField(default=False)),
                ('call_time', models.DateTimeField(blank=True, null=True)),
                ('response_time_actual', models.DateTimeField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('backup_staff', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='backup_oncall_shifts', to='hospital.hospitalstaff')),
                ('department', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='oncall_schedules', to='core.department')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='oncall_schedules', to=settings.AUTH_USER_MODEL)),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='oncall_shifts', to='hospital.hospitalstaff')),
            ],
            options={
                'db_table': 'oncall_schedules',
                'ordering': ['start_datetime'],
            },
        ),
        migrations.CreateModel(
            name='OperatingRoom',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('or_number', models.CharField(help_text='Operating room number', max_length=20)),
                ('or_name', models.CharField(max_length=100)),
                ('floor_number', models.CharField(max_length=10)),
                ('or_type', models.CharField(choices=[('general', 'Chirurgie générale'), ('cardiac', 'Chirurgie cardiaque'), ('neuro', 'Neurochirurgie'), ('ortho', 'Orthopédie'), ('pediatric', 'Pédiatrie'), ('trauma', 'Traumatologie')], max_length=50)),
                ('has_laparoscopy', models.BooleanField(default=False)),
                ('has_robotic_surgery', models.BooleanField(default=False)),
                ('has_c_arm', models.BooleanField(default=False)),
                ('status', models.CharField(choices=[('available', 'Disponible'), ('occupied', 'Occupé'), ('cleaning', 'En nettoyage'), ('maintenance', 'En maintenance'), ('reserved', 'Réservé')], default='available', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='operating_rooms', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'operating_rooms',
            },
        ),
        migrations.CreateModel(
            name='PhysicianOrder',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('order_number', models.CharField(max_length=50, unique=True)),
                ('order_type', models.CharField(choices=[('medication', 'Médicament'), ('lab', 'Laboratoire'), ('imaging', 'Imagerie'), ('procedure', 'Procédure'), ('diet', 'Régime alimentaire'), ('nursing', 'Soins infirmiers'), ('consult', 'Consultation'), ('therapy', 'Thérapie'), ('other', 'Autre')], max_length=20)),
                ('order_description', models.TextField()),
                ('clinical_indication', models.TextField(blank=True)),
                ('priority', models.CharField(choices=[('routine', 'Routine'), ('urgent', 'Urgent'), ('stat', 'STAT (immédiat)'), ('asap', 'Dès que possible')], default='routine', max_length=20)),
                ('order_datetime', models.DateTimeField(default=django.utils.timezone.now)),
                ('drug_interaction_checked', models.BooleanField(default=False)),
                ('drug_interaction_warnings', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('acknowledged', 'Accusé de réception'), ('in_progress', 'En cours'), ('completed', 'Terminé'), ('cancelled', 'Annulé'), ('discontinued', 'Interrompu'), ('on_hold', 'En suspens')], default='pending', max_length=20)),
                ('acknowledged_datetime', models.DateTimeField(blank=True, null=True)),
                ('completed_datetime', models.DateTimeField(blank=True, null=True)),
                ('cancellation_reason', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('acknowledged_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders_acknowledged', to='hospital.hospitalstaff')),
                ('admission', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='hospital.admission')),
                ('cancelled_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders_cancelled', to='hospital.hospitalstaff')),
                ('completed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='orders_completed', to='hospital.hospitalstaff')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hospital_physician_orders', to=settings.AUTH_USER_MODEL)),
                ('ordering_physician', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='orders_created', to='hospital.hospitalstaff')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='patient_physician_orders', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'physician_orders',
                'ordering': ['-order_datetime'],
            },
        ),
        migrations.CreateModel(
            name='StaffCredential',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('credential_type', models.CharField(choices=[('medical_license', 'Licence médicale'), ('nursing_license', 'Licence infirmière'), ('board_certification', 'Certification du conseil'), ('specialty_certification', 'Certification de spécialité'), ('cpr_bls', 'RCR/BLS'), ('acls', 'ACLS'), ('pals', 'PALS'), ('other', 'Autre')], max_length=50)),
                ('credential_name', models.CharField(max_length=255)),
                ('issuing_organization', models.CharField(max_length=255)),
                ('credential_number', models.CharField(max_length=100)),
                ('issue_date', models.DateField()),
                ('expiration_date', models.DateField()),
                ('verification_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('active', 'Actif'), ('expired', 'Expiré'), ('pending_renewal', 'En attente de renouvellement'), ('suspended', 'Suspendu'), ('revoked', 'Révoqué')], default='active', max_length=20)),
                ('is_verified', models.BooleanField(default=False)),
                ('document_file', models.FileField(blank=True, upload_to='staff_credentials/%Y/%m/')),
                ('expiration_alert_sent', models.BooleanField(default=False)),
                ('days_before_expiration_alert', models.IntegerField(default=90)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='credentials', to='hospital.hospitalstaff')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_credentials', to='hospital.hospitalstaff')),
            ],
            options={
                'db_table': 'staff_credentials',
                'ordering': ['expiration_date'],
            },
        ),
        migrations.CreateModel(
            name='StaffShift',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('shift_date', models.DateField()),
                ('shift_type', models.CharField(choices=[('day', 'Jour (7h-15h)'), ('evening', 'Soir (15h-23h)'), ('night', 'Nuit (23h-7h)'), ('day_12h', 'Jour 12h (7h-19h)'), ('night_12h', 'Nuit 12h (19h-7h)'), ('custom', 'Personnalisé')], max_length=20)),
                ('start_time', models.TimeField()),
                ('end_time', models.TimeField()),
                ('actual_clock_in', models.DateTimeField(blank=True, null=True)),
                ('actual_clock_out', models.DateTimeField(blank=True, null=True)),
                ('status', models.CharField(choices=[('scheduled', 'Programmé'), ('confirmed', 'Confirmé'), ('in_progress', 'En cours'), ('completed', 'Terminé'), ('cancelled', 'Annulé'), ('no_show', 'Absent')], default='scheduled', max_length=20)),
                ('is_overtime', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('cancellation_reason', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('department', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shifts', to='core.department')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff_shifts', to=settings.AUTH_USER_MODEL)),
                ('staff', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shifts', to='hospital.hospitalstaff')),
            ],
            options={
                'db_table': 'staff_shifts',
                'ordering': ['shift_date', 'start_time'],
            },
        ),
        migrations.CreateModel(
            name='SurgerySchedule',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('surgery_number', models.CharField(max_length=50, unique=True)),
                ('scheduled_date', models.DateField()),
                ('scheduled_start_time', models.TimeField()),
                ('estimated_duration_minutes', models.IntegerField()),
                ('scheduled_end_time', models.TimeField(blank=True, null=True)),
                ('procedure_name', models.CharField(max_length=255)),
                ('procedure_code', models.CharField(blank=True, help_text='CPT or ICD-10-PCS code', max_length=50)),
                ('procedure_category', models.CharField(choices=[('elective', 'Électif'), ('urgent', 'Urgent'), ('emergency', 'Urgence')], default='elective', max_length=50)),
                ('surgery_type', models.CharField(blank=True, max_length=100)),
                ('special_equipment', models.TextField(blank=True, help_text='Special equipment requirements')),
                ('implants_needed', models.TextField(blank=True)),
                ('actual_start_time', models.DateTimeField(blank=True, null=True)),
                ('actual_end_time', models.DateTimeField(blank=True, null=True)),
                ('actual_duration_minutes', models.IntegerField(blank=True, null=True)),
                ('pre_op_checklist_complete', models.BooleanField(default=False)),
                ('consent_signed', models.BooleanField(default=False)),
                ('surgical_site_marked', models.BooleanField(default=False)),
                ('estimated_blood_loss_ml', models.IntegerField(blank=True, null=True)),
                ('complications', models.TextField(blank=True)),
                ('post_op_destination', models.CharField(blank=True, help_text='ICU, Ward, PACU, etc.', max_length=50)),
                ('post_op_orders', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('scheduled', 'Programmé'), ('confirmed', 'Confirmé'), ('patient_arrived', 'Patient arrivé'), ('in_pre_op', 'En pré-opératoire'), ('in_surgery', 'En cours de chirurgie'), ('in_pacu', 'En salle de réveil'), ('completed', 'Terminé'), ('cancelled', 'Annulé'), ('postponed', 'Reporté')], default='scheduled', max_length=20)),
                ('cancellation_reason', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('admission', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='surgeries', to='hospital.admission')),
                ('anesthesiologist', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='surgeries_as_anesthesiologist', to='hospital.hospitalstaff')),
                ('assistant_surgeon', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='surgeries_as_assistant', to='hospital.hospitalstaff')),
                ('circulating_nurse', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='surgeries_as_circulating_nurse', to='hospital.hospitalstaff')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hospital_surgeries', to=settings.AUTH_USER_MODEL)),
                ('operating_room', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='scheduled_surgeries', to='hospital.operatingroom')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='patient_surgeries', to=settings.AUTH_USER_MODEL)),
                ('primary_surgeon', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='surgeries_as_primary', to='hospital.hospitalstaff')),
                ('scrub_nurse', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='surgeries_as_scrub_nurse', to='hospital.hospitalstaff')),
            ],
            options={
                'db_table': 'surgery_schedules',
                'ordering': ['scheduled_date', 'scheduled_start_time'],
            },
        ),
        migrations.AddField(
            model_name='operatingroom',
            name='current_surgery',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='current_or', to='hospital.surgeryschedule'),
        ),
        migrations.CreateModel(
            name='TriageAssessment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('triage_time', models.DateTimeField(default=django.utils.timezone.now)),
                ('esi_level', models.CharField(choices=[('1', 'ESI 1 - Critique (immédiat)'), ('2', 'ESI 2 - Urgence (10 minutes)'), ('3', 'ESI 3 - Urgent (30 minutes)'), ('4', 'ESI 4 - Moins urgent (60 minutes)'), ('5', 'ESI 5 - Non urgent (120 minutes)')], help_text='Emergency Severity Index', max_length=1)),
                ('color_code', models.CharField(choices=[('red', 'Rouge - Critique'), ('orange', 'Orange - Urgence'), ('yellow', 'Jaune - Urgent'), ('green', 'Vert - Moins urgent'), ('blue', 'Bleu - Non urgent')], max_length=10)),
                ('blood_pressure_systolic', models.IntegerField(blank=True, null=True)),
                ('blood_pressure_diastolic', models.IntegerField(blank=True, null=True)),
                ('heart_rate', models.IntegerField(blank=True, null=True)),
                ('respiratory_rate', models.IntegerField(blank=True, null=True)),
                ('temperature', models.DecimalField(blank=True, decimal_places=1, max_digits=4, null=True)),
                ('oxygen_saturation', models.IntegerField(blank=True, null=True)),
                ('pain_score', models.IntegerField(blank=True, help_text='0-10 pain scale', null=True)),
                ('chief_complaint', models.TextField()),
                ('resource_needs', models.TextField(blank=True, help_text='Estimated resource needs (labs, imaging, etc.)')),
                ('is_re_triage', models.BooleanField(default=False)),
                ('previous_esi_level', models.CharField(blank=True, max_length=1)),
                ('re_triage_reason', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('ed_visit', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='triage', to='hospital.emergencyvisit')),
                ('triage_nurse', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='triage_assessments', to='hospital.hospitalstaff')),
            ],
            options={
                'db_table': 'triage_assessments',
                'ordering': ['-triage_time'],
            },
        ),
        migrations.CreateModel(
            name='CriticalValueAlert',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('test_name', models.CharField(max_length=255)),
                ('result_value', models.CharField(max_length=100)),
                ('normal_range', models.CharField(max_length=100)),
                ('unit_of_measure', models.CharField(max_length=50)),
                ('alert_type', models.CharField(choices=[('critical_high', 'Critique élevé'), ('critical_low', 'Critique bas'), ('panic', 'Panique'), ('abnormal', 'Anormal')], max_length=20)),
                ('severity', models.CharField(choices=[('low', 'Bas'), ('medium', 'Moyen'), ('high', 'Élevé'), ('critical', 'Critique')], max_length=20)),
                ('result_datetime', models.DateTimeField()),
                ('alert_created', models.DateTimeField(default=django.utils.timezone.now)),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('notified', 'Notifié'), ('acknowledged', 'Accusé de réception'), ('action_taken', 'Action entreprise')], default='pending', max_length=20)),
                ('notification_datetime', models.DateTimeField(blank=True, null=True)),
                ('notification_method', models.CharField(blank=True, help_text='Email, SMS, Phone, etc.', max_length=50)),
                ('acknowledged_datetime', models.DateTimeField(blank=True, null=True)),
                ('action_taken', models.TextField(blank=True)),
                ('notes', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('acknowledged_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='critical_alerts_acknowledged', to='hospital.hospitalstaff')),
                ('admission', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='critical_alerts', to='hospital.admission')),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='hospital_critical_alerts', to=settings.AUTH_USER_MODEL)),
                ('notified_physician', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='critical_alerts_received', to='hospital.hospitalstaff')),
                ('patient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='patient_critical_alerts', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'critical_value_alerts',
                'ordering': ['-alert_created'],
                'indexes': [models.Index(fields=['hospital', 'status'], name='critical_va_hospita_0a3b2b_idx'), models.Index(fields=['patient'], name='critical_va_patient_18d0e8_idx'), models.Index(fields=['status', 'alert_created'], name='critical_va_status_2e56ff_idx'), models.Index(fields=['alert_type'], name='critical_va_alert_t_07b304_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='emergencyvisit',
            index=models.Index(fields=['hospital', 'status'], name='emergency_v_hospita_9168ba_idx'),
        ),
        migrations.AddIndex(
            model_name='emergencyvisit',
            index=models.Index(fields=['patient'], name='emergency_v_patient_d3d2f7_idx'),
        ),
        migrations.AddIndex(
            model_name='emergencyvisit',
            index=models.Index(fields=['ed_number'], name='emergency_v_ed_numb_a3bdf4_idx'),
        ),
        migrations.AddIndex(
            model_name='emergencyvisit',
            index=models.Index(fields=['arrival_time'], name='emergency_v_arrival_2877a4_idx'),
        ),
        migrations.AddIndex(
            model_name='emergencyvisit',
            index=models.Index(fields=['status', 'arrival_time'], name='emergency_v_status_4d1eeb_idx'),
        ),
        migrations.AddIndex(
            model_name='equipmentmaintenance',
            index=models.Index(fields=['hospital', 'status'], name='equipment_m_hospita_2470b2_idx'),
        ),
        migrations.AddIndex(
            model_name='equipmentmaintenance',
            index=models.Index(fields=['scheduled_date'], name='equipment_m_schedul_05b22c_idx'),
        ),
        migrations.AddIndex(
            model_name='equipmentmaintenance',
            index=models.Index(fields=['equipment_serial_number'], name='equipment_m_equipme_579334_idx'),
        ),
        migrations.AddIndex(
            model_name='equipmentmaintenance',
            index=models.Index(fields=['status'], name='equipment_m_status_85f3b3_idx'),
        ),
        migrations.AddIndex(
            model_name='icuadmission',
            index=models.Index(fields=['hospital', 'status'], name='icu_admissi_hospita_54292b_idx'),
        ),
        migrations.AddIndex(
            model_name='icuadmission',
            index=models.Index(fields=['patient'], name='icu_admissi_patient_f62492_idx'),
        ),
        migrations.AddIndex(
            model_name='icuadmission',
            index=models.Index(fields=['icu_admission_number'], name='icu_admissi_icu_adm_5550ee_idx'),
        ),
        migrations.AddIndex(
            model_name='oncallschedule',
            index=models.Index(fields=['hospital', 'start_datetime'], name='oncall_sche_hospita_89a7c3_idx'),
        ),
        migrations.AddIndex(
            model_name='oncallschedule',
            index=models.Index(fields=['staff', 'start_datetime'], name='oncall_sche_staff_i_d6ba8e_idx'),
        ),
        migrations.AddIndex(
            model_name='oncallschedule',
            index=models.Index(fields=['department', 'start_datetime'], name='oncall_sche_departm_819f69_idx'),
        ),
        migrations.AddIndex(
            model_name='oncallschedule',
            index=models.Index(fields=['status'], name='oncall_sche_status_32839a_idx'),
        ),
        migrations.AddIndex(
            model_name='physicianorder',
            index=models.Index(fields=['hospital', 'status'], name='physician_o_hospita_cc2063_idx'),
        ),
        migrations.AddIndex(
            model_name='physicianorder',
            index=models.Index(fields=['patient', 'status'], name='physician_o_patient_7a4f8e_idx'),
        ),
        migrations.AddIndex(
            model_name='physicianorder',
            index=models.Index(fields=['admission'], name='physician_o_admissi_47d760_idx'),
        ),
        migrations.AddIndex(
            model_name='physicianorder',
            index=models.Index(fields=['order_number'], name='physician_o_order_n_6d96ea_idx'),
        ),
        migrations.AddIndex(
            model_name='physicianorder',
            index=models.Index(fields=['priority', 'status'], name='physician_o_priorit_1eff4c_idx'),
        ),
        migrations.AddIndex(
            model_name='physicianorder',
            index=models.Index(fields=['order_type', 'status'], name='physician_o_order_t_f711ea_idx'),
        ),
        migrations.AddIndex(
            model_name='staffcredential',
            index=models.Index(fields=['staff', 'status'], name='staff_crede_staff_i_578837_idx'),
        ),
        migrations.AddIndex(
            model_name='staffcredential',
            index=models.Index(fields=['credential_type'], name='staff_crede_credent_c72812_idx'),
        ),
        migrations.AddIndex(
            model_name='staffcredential',
            index=models.Index(fields=['expiration_date'], name='staff_crede_expirat_363fc7_idx'),
        ),
        migrations.AddIndex(
            model_name='staffcredential',
            index=models.Index(fields=['status'], name='staff_crede_status_ae68f6_idx'),
        ),
        migrations.AddIndex(
            model_name='staffshift',
            index=models.Index(fields=['hospital', 'shift_date'], name='staff_shift_hospita_e245c5_idx'),
        ),
        migrations.AddIndex(
            model_name='staffshift',
            index=models.Index(fields=['staff', 'shift_date'], name='staff_shift_staff_i_3b4ba8_idx'),
        ),
        migrations.AddIndex(
            model_name='staffshift',
            index=models.Index(fields=['department', 'shift_date'], name='staff_shift_departm_b9abaf_idx'),
        ),
        migrations.AddIndex(
            model_name='staffshift',
            index=models.Index(fields=['status'], name='staff_shift_status_1778d1_idx'),
        ),
        migrations.AddIndex(
            model_name='surgeryschedule',
            index=models.Index(fields=['hospital', 'status'], name='surgery_sch_hospita_54b8fa_idx'),
        ),
        migrations.AddIndex(
            model_name='surgeryschedule',
            index=models.Index(fields=['patient'], name='surgery_sch_patient_54387f_idx'),
        ),
        migrations.AddIndex(
            model_name='surgeryschedule',
            index=models.Index(fields=['operating_room', 'scheduled_date'], name='surgery_sch_operati_4ae52e_idx'),
        ),
        migrations.AddIndex(
            model_name='surgeryschedule',
            index=models.Index(fields=['scheduled_date'], name='surgery_sch_schedul_dce2c5_idx'),
        ),
        migrations.AddIndex(
            model_name='surgeryschedule',
            index=models.Index(fields=['primary_surgeon', 'scheduled_date'], name='surgery_sch_primary_b5672a_idx'),
        ),
        migrations.AddIndex(
            model_name='operatingroom',
            index=models.Index(fields=['hospital', 'status'], name='operating_r_hospita_fe5818_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='operatingroom',
            unique_together={('hospital', 'or_number')},
        ),
        migrations.AddIndex(
            model_name='triageassessment',
            index=models.Index(fields=['esi_level'], name='triage_asse_esi_lev_2bca83_idx'),
        ),
        migrations.AddIndex(
            model_name='triageassessment',
            index=models.Index(fields=['triage_time'], name='triage_asse_triage__818185_idx'),
        ),
    ]
