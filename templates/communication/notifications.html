{% load static %}
<!DOCTYPE html>
<html lang="fr" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notifications - BINTACURA</title>
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'css/top-nav.css' %}">
    <link rel="stylesheet" href="{% static 'css/communication/notifications.css' %}">
    {% include "components/translation_script.html" %}
</head>

<body>
    {% include "components/top_nav.html" with page_title="Notifications" %}
    
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    {% include "layout/_sidebar_"|add:user_type|add:".html" %}
    
    <div class="main-content">
        <div class="notifications-container">
            <div class="notifications-header">
                <h2>Notifications</h2>
                <button class="btn-mark-all-read" onclick="markAllAsRead()">
                    Tout marquer comme lu
                </button>
            </div>

            <div class="notifications-filters">
                <button class="filter-btn active" data-filter="all">Toutes</button>
                <button class="filter-btn" data-filter="unread">Non lues</button>
                <button class="filter-btn" data-filter="read">Lues</button>
            </div>

            <div class="notifications-list" id="notificationsList">
                {% if notifications %}
                    {% for notification in notifications %}
                    <div class="notification-item {% if not notification.is_read %}unread{% endif %}" 
                         data-notification-id="{{ notification.id }}">
                        <div class="notification-icon">
                            {% if notification.notification_type == 'appointment' %}
                                üìÖ
                            {% elif notification.notification_type == 'payment' %}
                                üí∞
                            {% elif notification.notification_type == 'message' %}
                                ‚úâÔ∏è
                            {% elif notification.notification_type == 'system' %}
                                ‚öôÔ∏è
                            {% else %}
                                üîî
                            {% endif %}
                        </div>
                        <div class="notification-content">
                            <div class="notification-title">{{ notification.title }}</div>
                            <div class="notification-message">{{ notification.message }}</div>
                            <div class="notification-time">{{ notification.created_at|timesince }} ago</div>
                        </div>
                        <div class="notification-actions">
                            {% if not notification.is_read %}
                            <button class="btn-mark-read" onclick="markAsRead('{{ notification.id }}')">
                                Marquer comme lu
                            </button>
                            {% endif %}
                            <button class="btn-delete" onclick="deleteNotification('{{ notification.id }}')">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div class="no-notifications">
                        <p>Aucune notification</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="{% static 'js/communication/notifications.js' %}"></script>
    <script src="{% static 'js/dashboard.js' %}"></script>
</body>

</html>
