{% load static %}
<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription - BINTACURA</title>
    <link rel="stylesheet" href="{% static 'css/auth.css' %}">
    <!-- hCaptcha JavaScript API - Load before form rendering -->
    <script src="https://hcaptcha.com/1/api.js" async defer></script>
    <script src="{% static 'js/registration.js' %}" defer></script>
    <style>
        /* hCaptcha Widget Styles */
        .form-group > div[class*="h-captcha"],
        .form-group > div[data-sitekey] {
            margin: 10px auto;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 78px;
            overflow: visible !important;
        }

        /* Ensure hCaptcha iframe is visible */
        .form-group iframe[src*="hcaptcha"] {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            min-height: 78px;
        }
    </style>
</head>

<body>
        <div class="register-container">
            <div class="content-wrapper">
                <div class="logo-container">
                    <div class="logo">
                        {% load static %}
                        <img src="{% static 'img/logo.png' %}" alt="BINTACURA" class="auth-logo">
                    </div>
                </div>

                {% if messages %}
                {% for message in messages %}
                <div class="{% if message.tags == 'error' %}error-message{% else %}success-message{% endif %}">
                    {{ message }}
                </div>
                {% endfor %}
                {% endif %}

                <form method="POST" action="{% url 'authentication:register' %}">
                    {% csrf_token %}

                    <div class="form-group">
                        <div class="input-wrapper">
                            <select name="role" class="form-input" required aria-label="Type de compte">
                                <option value="">SÃ©lectionnez votre type de compte</option>
                                <option value="patient">Patient</option>
                                <option value="doctor">MÃ©decin</option>
                                <option value="hospital">HÃ´pital</option>
                                <option value="pharmacy">Pharmacie</option>
                                <option value="insurance_company">Compagnie d'assurance</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-wrapper">
                            <input type="text" name="last_name" class="form-input" placeholder="Nom de famille" required
                                autocomplete="family-name" aria-label="Nom de famille">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-wrapper">
                            <input type="text" name="first_name" class="form-input" placeholder="PrÃ©nom(s)" required
                                autocomplete="given-name" aria-label="PrÃ©nom">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="country_code" class="form-label">Pays / Country</label>
                        <div class="input-wrapper">
                            <select name="country_code" id="country_code" class="form-input" required aria-label="Pays">
                                <option value="">SÃ©lectionnez votre pays</option>
                                <option value="BJ" data-code="+229">ðŸ‡§ðŸ‡¯ BÃ©nin</option>
                                <option value="TG" data-code="+228">ðŸ‡¹ðŸ‡¬ Togo</option>
                                <option value="CI" data-code="+225">ðŸ‡¨ðŸ‡® CÃ´te d'Ivoire</option>
                                <option value="SN" data-code="+221">ðŸ‡¸ðŸ‡³ SÃ©nÃ©gal</option>
                                <option value="ML" data-code="+223">ðŸ‡²ðŸ‡± Mali</option>
                                <option value="NE" data-code="+227">ðŸ‡³ðŸ‡ª Niger</option>
                                <option value="BF" data-code="+226">ðŸ‡§ðŸ‡« Burkina Faso</option>
                                <option value="GH" data-code="+233">ðŸ‡¬ðŸ‡­ Ghana</option>
                                <option value="NG" data-code="+234">ðŸ‡³ðŸ‡¬ Nigeria</option>
                                <option value="CM" data-code="+237">ðŸ‡¨ðŸ‡² Cameroun</option>
                                <option value="FR" data-code="+33">ðŸ‡«ðŸ‡· France</option>
                                <option value="US" data-code="+1">ðŸ‡ºðŸ‡¸ Ã‰tats-Unis</option>
                                <option value="CA" data-code="+1">ðŸ‡¨ðŸ‡¦ Canada</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="phone_number" class="form-label">
                            NumÃ©ro de tÃ©lÃ©phone <span class="required-note">(Requis pour les paiements mobiles)</span>
                        </label>
                        <div class="phone-input-wrapper">
                            <span id="phone_prefix" class="phone-prefix">+---</span>
                            <input type="tel" name="phone_number" id="phone_number" class="form-input"
                                placeholder="97000000"
                                required
                                autocomplete="tel"
                                aria-label="NumÃ©ro de tÃ©lÃ©phone"
                                pattern="[0-9]{8,10}"
                                title="Veuillez entrer un numÃ©ro valide (8-10 chiffres)">
                        </div>
                        <small class="phone-help-text">
                            Format: NumÃ©ro local sans l'indicatif pays (ex: 97000000)
                        </small>
                    </div>

                    <div class="form-group">
                        <div class="input-wrapper">
                            <input type="email" name="email" class="form-input" placeholder="Votre couriel ou email"
                                required autocomplete="email" aria-label="Email">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="input-wrapper">
                            <input type="password" name="password" class="form-input" placeholder="Votre mot de passe"
                                required autocomplete="new-password" aria-label="Mot de passe">
                        </div>
                    </div>

                    <!-- hCaptcha Widget -->
                    <div class="form-group">
                        <div class="h-captcha" data-sitekey="dde4565e-ae1a-4ec6-8682-6da86c003fd8"></div>
                    </div>

                    <button type="submit" class="submit-btn">S'inscrire</button>
                </form>
            </div>
        </div>


    </body>

</html>
